/*
 * Time picker for pickadate.js v3.6.3
 * http://amsul.github.io/pickadate.js/time.htm
 */
!function(b){"function"==typeof define&&define.amd?define(["./picker","jquery"],b):"object"==typeof exports?module.exports=b(require("./picker.js"),require("jquery")):b(Picker,jQuery)}(function(i,j){function k(h,q){var r=this,s=h.$node[0].value,t=h.$node.data("value"),u=t||s,v=t?q.formatSubmit:q.format;r.settings=q,r.$node=h.$node,r.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},r.item={},r.item.clear=null,r.item.interval=q.interval||30,r.item.disable=(q.disable||[]).slice(0),r.item.enable=-function(b){return !0===b[0]?b.shift():-1}(r.item.disable),r.set("min",q.min).set("max",q.max).set("now"),u?r.set("select",u,{format:v}):r.set("select",null).set("highlight",r.item.now),r.key={40:1,38:-1,39:1,37:-1,go:function(b){r.set("highlight",r.item.highlight.pick+b*r.item.interval,{interval:b*r.item.interval}),this.render()}},h.on("render",function(){var a=h.$root.children(),b=a.find("."+q.klass.viewset),g=function(c){return["webkit","moz","ms","o",""].map(function(d){return(d?"-"+d+"-":"")+c})},w=function(c,d){g("transform").map(function(e){c.css(e,d)}),g("transition").map(function(e){c.css(e,d)})};b.length&&(w(a,"none"),a[0].scrollTop=~~b.position().top-2*b[0].clientHeight,w(a,""))},1).on("open",function(){h.$root.find("button").attr("disabled",!1)},1).on("close",function(){h.$root.find("button").attr("disabled",!0)},1)}var l=24,m=60,n=12,o=l*m,p=i._;k.prototype.set=function(f,g,h){var q=this,r=q.item;return null===g?("clear"==f&&(f="select"),r[f]=g,q):(r["enable"==f?"disable":"flip"==f?"enable":f]=q.queue[f].split(" ").map(function(a){return g=q[a](f,g,h)}).pop(),"select"==f?q.set("highlight",r.select,h):"highlight"==f?q.set("view",r.highlight,h):"interval"==f?q.set("min",r.min,h).set("max",r.max,h):f.match(/^(flip|min|max|disable|enable)$/)&&(r.select&&q.disabled(r.select)&&q.set("select",g,h),r.highlight&&q.disabled(r.highlight)&&q.set("highlight",g,h),"min"==f&&q.set("max",r.max,h)),q)},k.prototype.get=function(b){return this.item[b]},k.prototype.create=function(b,d,e){var g=this;return d=void 0===d?b:d,p.isDate(d)&&(d=[d.getHours(),d.getMinutes()]),j.isPlainObject(d)&&p.isInteger(d.pick)?d=d.pick:j.isArray(d)?d=+d[0]*m+ +d[1]:p.isInteger(d)||(d=g.now(b,d,e)),"max"==b&&d<g.item.min.pick&&(d+=o),"min"!=b&&"max"!=b&&(d-g.item.min.pick)%g.item.interval!=0&&(d+=g.item.interval),d=g.normalize(b,d,e),{hour:~~(l+d/m)%l,mins:(m+d%m)%m,time:(o+d)%o,pick:d%o}},k.prototype.createRange=function(b,f){var g=this,h=function(c){return !0===c||j.isArray(c)||p.isDate(c)?g.create(c):c};return p.isInteger(b)||(b=h(b)),p.isInteger(f)||(f=h(f)),p.isInteger(b)&&j.isPlainObject(f)?b=[f.hour,f.mins+b*g.settings.interval]:p.isInteger(f)&&j.isPlainObject(b)&&(f=[b.hour,b.mins+f*g.settings.interval]),{from:h(b),to:h(f)}},k.prototype.withinRange=function(c,d){return c=this.createRange(c.from,c.to),d.pick>=c.from.pick&&d.pick<=c.to.pick},k.prototype.overlapRanges=function(d,e){var f=this;return d=f.createRange(d.from,d.to),e=f.createRange(e.from,e.to),f.withinRange(d,e.from)||f.withinRange(d,e.to)||f.withinRange(e,d.from)||f.withinRange(e,d.to)},k.prototype.now=function(e,h){var q,r=this.item.interval,s=new Date,t=s.getHours()*m+s.getMinutes(),u=p.isInteger(h);return t-=t%r,q=h<0&&r*h+t<=-r,t+="min"==e&&q?0:r,u&&(t+=r*(q&&"max"!=e?h+1:h)),t},k.prototype.normalize=function(e,f){var g=this.item.interval,h=this.item.min&&this.item.min.pick||0;return f-="min"==e?0:(f-h)%g},k.prototype.measure=function(b,d,e){var h=this;return d||(d="min"==b?[0,0]:[l-1,m-1]),"string"==typeof d?d=h.parse(b,d):!0===d||p.isInteger(d)?d=h.now(b,d,e):j.isPlainObject(d)&&p.isInteger(d.pick)&&(d=h.normalize(b,d.pick,e)),d},k.prototype.validate=function(f,g,h){var q=this,r=h&&h.interval?h.interval:q.item.interval;return q.disabled(g)&&(g=q.shift(g,r)),g=q.scope(g),q.disabled(g)&&(g=q.shift(g,-1*r)),g},k.prototype.disabled=function(b){var e=this,f=e.item.disable.filter(function(a){return p.isInteger(a)?b.hour==a:j.isArray(a)||p.isDate(a)?b.pick==e.create(a).pick:j.isPlainObject(a)?e.withinRange(a,b):void 0});return f=f.length&&!f.filter(function(c){return j.isArray(c)&&"inverted"==c[2]||j.isPlainObject(c)&&c.inverted}).length,-1===e.item.enable?!f:f||b.pick<e.item.min.pick||b.pick>e.item.max.pick},k.prototype.shift=function(f,g){var h=this,q=h.item.min.pick,r=h.item.max.pick;for(g=g||h.item.interval;h.disabled(f)&&(f=h.create(f.pick+=g),!(f.pick<=q||f.pick>=r));){}return f},k.prototype.scope=function(d){var e=this.item.min.pick,f=this.item.max.pick;return this.create(d.pick>f?f:d.pick<e?e:d)},k.prototype.parse=function(e,h,q){var r,s,t,u,v,w=this,x={};if(!h||"string"!=typeof h){return h}q&&q.format||(q=q||{},q.format=w.settings.format),w.formats.toArray(q.format).map(function(b){var f,g=w.formats[b],y=g?p.trigger(g,w,[h,x]):b.replace(/^!/,"").length;g&&(f=h.substr(0,y),x[b]=f.match(/^\d+$/)?+f:f),h=h.substr(y)});for(u in x){v=x[u],p.isInteger(v)?u.match(/^(h|hh)$/i)?(r=v,"h"!=u&&"hh"!=u||(r%=12)):"i"==u&&(s=v):u.match(/^a$/i)&&v.match(/^p/i)&&("h" in x||"hh" in x)&&(t=!0)}return(t?r+12:r)*m+s},k.prototype.formats={h:function(c,d){return c?p.digits(c):d.hour%n||n},hh:function(c,d){return c?2:p.lead(d.hour%n||n)},H:function(c,d){return c?p.digits(c):""+d.hour%24},HH:function(c,d){return c?p.digits(c):p.lead(d.hour%24)},i:function(c,d){return c?2:p.lead(d.mins)},a:function(c,d){return c?4:o/2>d.time%o?"a.m.":"p.m."},A:function(c,d){return c?2:o/2>d.time%o?"AM":"PM"},toArray:function(b){return b.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(d,e){var f=this;return f.formats.toArray(d).map(function(b){return p.trigger(f.formats[b],f,[0,e])||b.replace(/^!/,"")}).join("")}},k.prototype.isTimeExact=function(b,e){var f=this;return p.isInteger(b)&&p.isInteger(e)||"boolean"==typeof b&&"boolean"==typeof e?b===e:(p.isDate(b)||j.isArray(b))&&(p.isDate(e)||j.isArray(e))?f.create(b).pick===f.create(e).pick:!(!j.isPlainObject(b)||!j.isPlainObject(e))&&(f.isTimeExact(b.from,e.from)&&f.isTimeExact(b.to,e.to))},k.prototype.isTimeOverlap=function(b,e){var f=this;return p.isInteger(b)&&(p.isDate(e)||j.isArray(e))?b===f.create(e).hour:p.isInteger(e)&&(p.isDate(b)||j.isArray(b))?e===f.create(b).hour:!(!j.isPlainObject(b)||!j.isPlainObject(e))&&f.overlapRanges(b,e)},k.prototype.flipEnable=function(c){var d=this.item;d.enable=c||(-1==d.enable?1:-1)},k.prototype.deactivate=function(b,f){var g=this,h=g.item.disable.slice(0);return"flip"==f?g.flipEnable():!1===f?(g.flipEnable(1),h=[]):!0===f?(g.flipEnable(-1),h=[]):f.map(function(d){for(var e,q=0;q<h.length;q+=1){if(g.isTimeExact(d,h[q])){e=!0;break}}e||(p.isInteger(d)||p.isDate(d)||j.isArray(d)||j.isPlainObject(d)&&d.from&&d.to)&&h.push(d)}),h},k.prototype.activate=function(b,g){var h=this,q=h.item.disable,r=q.length;return"flip"==g?h.flipEnable():!0===g?(h.flipEnable(1),q=[]):!1===g?(h.flipEnable(-1),q=[]):g.map(function(d){var e,f,s,t;for(s=0;s<r;s+=1){if(f=q[s],h.isTimeExact(f,d)){e=q[s]=null,t=!0;break}if(h.isTimeOverlap(f,d)){j.isPlainObject(d)?(d.inverted=!0,e=d):j.isArray(d)?(e=d,e[2]||e.push("inverted")):p.isDate(d)&&(e=[d.getFullYear(),d.getMonth(),d.getDate(),"inverted"]);break}}if(e){for(s=0;s<r;s+=1){if(h.isTimeExact(q[s],d)){q[s]=null;break}}}if(t){for(s=0;s<r;s+=1){if(h.isTimeOverlap(q[s],d)){q[s]=null;break}}}e&&q.push(e)}),q.filter(function(c){return null!=c})},k.prototype.i=function(c,d){return p.isInteger(d)&&d>0?d:this.item.interval},k.prototype.nodes=function(h){var q=this,r=q.settings,s=q.item.select,t=q.item.highlight,u=q.item.view,v=q.item.disable;return p.node("ul",p.group({min:q.item.min.pick,max:q.item.max.pick,i:q.item.interval,node:"li",item:function(b){b=q.create(b);var c=b.pick,d=s&&s.pick==c,e=t&&t.pick==c,f=v&&q.disabled(b),g=p.trigger(q.formats.toString,q,[r.format,b]);return[p.trigger(q.formats.toString,q,[p.trigger(r.formatLabel,q,[b])||r.format,b]),function(w){return d&&w.push(r.klass.selected),e&&w.push(r.klass.highlighted),u&&u.pick==c&&w.push(r.klass.viewset),f&&w.push(r.klass.disabled),w.join(" ")}([r.klass.listItem]),"data-pick="+b.pick+" "+p.ariaAttr({role:"option",label:g,selected:!(!d||q.$node.val()!==g)||null,activedescendant:!!e||null,disabled:!!f||null})]}})+p.node("li",p.node("button",r.clear,r.klass.buttonClear,"type=button data-clear=1"+(h?"":" disabled")+" "+p.ariaAttr({controls:q.$node[0].id})),"",p.ariaAttr({role:"presentation"})),r.klass.list,p.ariaAttr({role:"listbox",controls:q.$node[0].id}))},k.defaults=function(b){return{clear:"Clear",format:"h:i A",interval:30,closeOnSelect:!0,closeOnClear:!0,updateInput:!0,klass:{picker:b+" "+b+"--time",holder:b+"__holder",list:b+"__list",listItem:b+"__list-item",disabled:b+"__list-item--disabled",selected:b+"__list-item--selected",highlighted:b+"__list-item--highlighted",viewset:b+"__list-item--viewset",now:b+"__list-item--now",buttonClear:b+"__button--clear"}}}(i.klasses().picker),i.extend("pickatime",k)});