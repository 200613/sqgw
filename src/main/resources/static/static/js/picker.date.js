/*
 * Date picker for pickadate.js v3.6.3
 * http://amsul.github.io/pickadate.js/date.htm
 */
!function(b){"function"==typeof define&&define.amd?define(["./picker","jquery"],b):"object"==typeof exports?module.exports=b(require("./picker.js"),require("jquery")):b(Picker,jQuery)}(function(f,g){function h(k,l){var m=this,n=k.$node[0],o=n.value,p=k.$node.data("value"),q=p||o,r=p?l.formatSubmit:l.format,s=function(){return n.currentStyle?"rtl"==n.currentStyle.direction:"rtl"==getComputedStyle(k.$root[0]).direction};m.settings=l,m.$node=k.$node,m.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},m.item={},m.item.clear=null,m.item.disable=(l.disable||[]).slice(0),m.item.enable=-function(b){return !0===b[0]?b.shift():-1}(m.item.disable),m.set("min",l.min).set("max",l.max).set("now"),q?m.set("select",q,{format:r,defaultValue:!0}):m.set("select",null).set("highlight",m.item.now),m.key={40:7,38:-7,39:function(){return s()?-1:1},37:function(){return s()?1:-1},go:function(c){var e=m.item.highlight,t=new Date(e.year,e.month,e.date+c);m.set("highlight",t,{interval:c}),this.render()}},k.on("render",function(){k.$root.find("."+l.klass.selectMonth).on("change",function(){var a=this.value;a&&(k.set("highlight",[k.get("view").year,a,k.get("highlight").date]),k.$root.find("."+l.klass.selectMonth).trigger("focus"))}),k.$root.find("."+l.klass.selectYear).on("change",function(){var a=this.value;a&&(k.set("highlight",[a,k.get("view").month,k.get("highlight").date]),k.$root.find("."+l.klass.selectYear).trigger("focus"))})},1).on("open",function(){var a="";m.disabled(m.get("now"))&&(a=":not(."+l.klass.buttonToday+")"),k.$root.find("button"+a+", select").attr("disabled",!1)},1).on("close",function(){k.$root.find("button, select").attr("disabled",!0)},1)}var i=7,j=f._;h.prototype.set=function(k,l,m){var n=this,o=n.item;return null===l?("clear"==k&&(k="select"),o[k]=l,n):(o["enable"==k?"disable":"flip"==k?"enable":k]=n.queue[k].split(" ").map(function(a){return l=n[a](k,l,m)}).pop(),"select"==k?n.set("highlight",o.select,m):"highlight"==k?n.set("view",o.highlight,m):k.match(/^(flip|min|max|disable|enable)$/)&&(o.select&&n.disabled(o.select)&&n.set("select",o.select,m),o.highlight&&n.disabled(o.highlight)&&n.set("highlight",o.highlight,m)),n)},h.prototype.get=function(b){return this.item[b]},h.prototype.create=function(b,e,k){var l,m=this;return e=void 0===e?b:e,e==-1/0||e==1/0?l=e:g.isPlainObject(e)&&j.isInteger(e.pick)?e=e.obj:g.isArray(e)?(e=new Date(e[0],e[1],e[2]),e=j.isDate(e)?e:m.create().obj):e=j.isInteger(e)||j.isDate(e)?m.normalize(new Date(e),k):m.now(b,e,k),{year:l||e.getFullYear(),month:l||e.getMonth(),date:l||e.getDate(),day:l||e.getDay(),obj:l||e,pick:l||e.getTime()}},h.prototype.createRange=function(b,e){var k=this,l=function(c){return !0===c||g.isArray(c)||j.isDate(c)?k.create(c):c};return j.isInteger(b)||(b=l(b)),j.isInteger(e)||(e=l(e)),j.isInteger(b)&&g.isPlainObject(e)?b=[e.year,e.month,e.date+b]:j.isInteger(e)&&g.isPlainObject(b)&&(e=[b.year,b.month,b.date+e]),{from:l(b),to:l(e)}},h.prototype.withinRange=function(c,d){return c=this.createRange(c.from,c.to),d.pick>=c.from.pick&&d.pick<=c.to.pick},h.prototype.overlapRanges=function(d,e){var k=this;return d=k.createRange(d.from,d.to),e=k.createRange(e.from,e.to),k.withinRange(d,e.from)||k.withinRange(d,e.to)||k.withinRange(e,d.from)||k.withinRange(e,d.to)},h.prototype.now=function(d,e,k){return e=new Date,k&&k.rel&&e.setDate(e.getDate()+k.rel),this.normalize(e,k)},h.prototype.navigate=function(b,l,m){var n,o,p,q,r=g.isArray(l),s=g.isPlainObject(l),t=this.item.view;if(r||s){for(s?(o=l.year,p=l.month,q=l.date):(o=+l[0],p=+l[1],q=+l[2]),m&&m.nav&&t&&t.month!==p&&(o=t.year,p=t.month),n=new Date(o,p+(m&&m.nav?m.nav:0),1),o=n.getFullYear(),p=n.getMonth();new Date(o,p,q).getMonth()!==p;){q-=1}l=[o,p,q]}return l},h.prototype.normalize=function(b){return b.setHours(0,0,0,0),b},h.prototype.measure=function(d,e){var k=this;return j.isInteger(e)?e=k.now(d,e,{rel:e}):e?"string"==typeof e&&(e=k.parse(d,e)):e="min"==d?-1/0:1/0,e},h.prototype.viewset=function(c,d){return this.create([d.year,d.month,1])},h.prototype.validate=function(b,e,q){var r,s,t,u,v=this,w=e,x=q&&q.interval?q.interval:1,y=-1===v.item.enable,z=v.item.min,A=v.item.max,B=y&&v.item.disable.filter(function(c){if(g.isArray(c)){var k=v.create(c).pick;k<e.pick?r=!0:k>e.pick&&(s=!0)}return j.isInteger(c)}).length;if((!q||!q.nav&&!q.defaultValue)&&(!y&&v.disabled(e)||y&&v.disabled(e)&&(B||r||s)||!y&&(e.pick<=z.pick||e.pick>=A.pick))){for(y&&!B&&(!s&&x>0||!r&&x<0)&&(x*=-1);v.disabled(e)&&(Math.abs(x)>1&&(e.month<w.month||e.month>w.month)&&(e=w,x=x>0?1:-1),e.pick<=z.pick?(t=!0,x=1,e=v.create([z.year,z.month,z.date+(e.pick===z.pick?0:-1)])):e.pick>=A.pick&&(u=!0,x=-1,e=v.create([A.year,A.month,A.date+(e.pick===A.pick?0:1)])),!t||!u);){e=v.create([e.year,e.month,e.date+x])}}return e},h.prototype.disabled=function(b){var e=this,k=e.item.disable.filter(function(a){return j.isInteger(a)?b.day===(e.settings.firstDay?a:a-1)%7:g.isArray(a)||j.isDate(a)?b.pick===e.create(a).pick:g.isPlainObject(a)?e.withinRange(a,b):void 0});return k=k.length&&!k.filter(function(c){return g.isArray(c)&&"inverted"==c[3]||g.isPlainObject(c)&&c.inverted}).length,-1===e.item.enable?!k:k||b.pick<e.item.min.pick||b.pick>e.item.max.pick},h.prototype.parse=function(e,k,l){var m=this,n={};return k&&"string"==typeof k?(l&&l.format||(l=l||{},l.format=m.settings.format),m.formats.toArray(l.format).map(function(b){var d=m.formats[b],o=d?j.trigger(d,m,[k,n]):b.replace(/^!/,"").length;d&&(n[b]=k.substr(0,o)),k=k.substr(o)}),[n.yyyy||n.yy,+(n.mm||n.m)-1,n.dd||n.d]):k},h.prototype.formats=function(){function c(e,k,l){var m=e.match(/[^\x00-\x7F]+|\w+/)[0];return l.mm||l.m||(l.m=k.indexOf(m)+1),m.length}function d(b){return b.match(/\w+/)[0].length}return{d:function(e,k){return e?j.digits(e):k.date},dd:function(e,k){return e?2:j.lead(k.date)},ddd:function(b,e){return b?d(b):this.settings.weekdaysShort[e.day]},dddd:function(b,e){return b?d(b):this.settings.weekdaysFull[e.day]},m:function(e,k){return e?j.digits(e):k.month+1},mm:function(e,k){return e?2:j.lead(k.month+1)},mmm:function(a,e){var k=this.settings.monthsShort;return a?c(a,k,e):k[e.month]},mmmm:function(a,e){var k=this.settings.monthsFull;return a?c(a,k,e):k[e.month]},yy:function(e,k){return e?2:(""+k.year).slice(2)},yyyy:function(e,k){return e?4:k.year},toArray:function(b){return b.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,k){var l=this;return l.formats.toArray(e).map(function(b){return j.trigger(l.formats[b],l,[0,k])||b.replace(/^!/,"")}).join("")}}}(),h.prototype.isDateExact=function(b,e){var k=this;return j.isInteger(b)&&j.isInteger(e)||"boolean"==typeof b&&"boolean"==typeof e?b===e:(j.isDate(b)||g.isArray(b))&&(j.isDate(e)||g.isArray(e))?k.create(b).pick===k.create(e).pick:!(!g.isPlainObject(b)||!g.isPlainObject(e))&&k.isDateExact(b.from,e.from)&&k.isDateExact(b.to,e.to)},h.prototype.isDateOverlap=function(b,e){var k=this,l=k.settings.firstDay?1:0;return j.isInteger(b)&&(j.isDate(e)||g.isArray(e))?(b=b%7+l)===k.create(e).day+1:j.isInteger(e)&&(j.isDate(b)||g.isArray(b))?(e=e%7+l)===k.create(b).day+1:!(!g.isPlainObject(b)||!g.isPlainObject(e))&&k.overlapRanges(b,e)},h.prototype.flipEnable=function(c){var d=this.item;d.enable=c||(-1==d.enable?1:-1)},h.prototype.deactivate=function(b,e){var k=this,l=k.item.disable.slice(0);return"flip"==e?k.flipEnable():!1===e?(k.flipEnable(1),l=[]):!0===e?(k.flipEnable(-1),l=[]):e.map(function(d){for(var m,n=0;n<l.length;n+=1){if(k.isDateExact(d,l[n])){m=!0;break}}m||(j.isInteger(d)||j.isDate(d)||g.isArray(d)||g.isPlainObject(d)&&d.from&&d.to)&&l.push(d)}),l},h.prototype.activate=function(b,e){var k=this,l=k.item.disable,m=l.length;return"flip"==e?k.flipEnable():!0===e?(k.flipEnable(1),l=[]):!1===e?(k.flipEnable(-1),l=[]):e.map(function(d){var n,o,p,q;for(p=0;p<m;p+=1){if(o=l[p],k.isDateExact(o,d)){n=l[p]=null,q=!0;break}if(k.isDateOverlap(o,d)){g.isPlainObject(d)?(d.inverted=!0,n=d):g.isArray(d)?(n=d,n[3]||n.push("inverted")):j.isDate(d)&&(n=[d.getFullYear(),d.getMonth(),d.getDate(),"inverted"]);break}}if(n){for(p=0;p<m;p+=1){if(k.isDateExact(l[p],d)){l[p]=null;break}}}if(q){for(p=0;p<m;p+=1){if(k.isDateOverlap(l[p],d)){l[p]=null;break}}}n&&l.push(n)}),l.filter(function(c){return null!=c})},h.prototype.nodes=function(d){var e=this,r=e.settings,s=e.item,t=s.now,u=s.select,v=s.highlight,w=s.view,x=s.disable,y=s.min,z=s.max,A=function(c,k){return r.firstDay&&(c.push(c.shift()),k.push(k.shift())),j.node("thead",j.node("tr",j.group({min:0,max:i-1,i:1,node:"th",item:function(a){return[c[a],r.klass.weekdays,'scope=col title="'+k[a]+'"']}})))}((r.showWeekdaysFull?r.weekdaysFull:r.weekdaysShort).slice(0),r.weekdaysFull.slice(0)),B=function(b){return j.node("div"," ",r.klass["nav"+(b?"Next":"Prev")]+(b&&w.year>=z.year&&w.month>=z.month||!b&&w.year<=y.year&&w.month<=y.month?" "+r.klass.navDisabled:""),"data-nav="+(b||-1)+" "+j.ariaAttr({role:"button",controls:e.$node[0].id+"_table"})+' title="'+(b?r.labelMonthNext:r.labelMonthPrev)+'"')},C=function(){var a=r.showMonthsShort?r.monthsShort:r.monthsFull;return r.selectMonths?j.node("select",j.group({min:0,max:11,i:1,node:"option",item:function(b){return[a[b],0,"value="+b+(w.month==b?" selected":"")+(w.year==y.year&&b<y.month||w.year==z.year&&b>z.month?" disabled":"")]}}),r.klass.selectMonth,(d?"":"disabled")+" "+j.ariaAttr({controls:e.$node[0].id+"_table"})+' title="'+r.labelMonthSelect+'"'):j.node("div",a[w.month],r.klass.month)},D=function(){var a=w.year,b=!0===r.selectYears?5:~~(r.selectYears/2);if(b){var c=y.year,l=z.year,m=a-b,p=a+b;if(c>m&&(p+=c-m,m=c),l<p){var q=m-c,E=p-l;m-=q>E?E:q,p=l}return j.node("select",j.group({min:m,max:p,i:1,node:"option",item:function(k){return[k,0,"value="+k+(a==k?" selected":"")]}}),r.klass.selectYear,(d?"":"disabled")+" "+j.ariaAttr({controls:e.$node[0].id+"_table"})+' title="'+r.labelYearSelect+'"')}return j.node("div",a,r.klass.year)};return j.node("div",(r.selectYears?D()+C():C()+D())+B()+B(1),r.klass.header)+j.node("table",A+j.node("tbody",j.group({min:0,max:5,i:1,node:"tr",item:function(b){var c=r.firstDay&&0===e.create([w.year,w.month,1]).day?-7:0;return[j.group({min:i*b-w.day+c+1,max:function(){return this.min+i-1},i:1,node:"td",item:function(k){k=e.create([w.year,w.month,k+(r.firstDay?1:0)]);var l=u&&u.pick==k.pick,m=v&&v.pick==k.pick,p=x&&e.disabled(k)||k.pick<y.pick||k.pick>z.pick,q=j.trigger(e.formats.toString,e,[r.format,k]);return[j.node("div",k.date,function(a){return a.push(w.month==k.month?r.klass.infocus:r.klass.outfocus),t.pick==k.pick&&a.push(r.klass.now),l&&a.push(r.klass.selected),m&&a.push(r.klass.highlighted),p&&a.push(r.klass.disabled),a.join(" ")}([r.klass.day]),"data-pick="+k.pick+" "+j.ariaAttr({role:"gridcell",label:q,selected:!(!l||e.$node.val()!==q)||null,activedescendant:!!m||null,disabled:!!p||null})),"",j.ariaAttr({role:"presentation"})]}})]}})),r.klass.table,'id="'+e.$node[0].id+'_table" '+j.ariaAttr({role:"grid",controls:e.$node[0].id,readonly:!0}))+j.node("div",j.node("button",r.today,r.klass.buttonToday,"type=button data-pick="+t.pick+(d&&!e.disabled(t)?"":" disabled")+" "+j.ariaAttr({controls:e.$node[0].id}))+j.node("button",r.clear,r.klass.buttonClear,"type=button data-clear=1"+(d?"":" disabled")+" "+j.ariaAttr({controls:e.$node[0].id}))+j.node("button",r.close,r.klass.buttonClose,"type=button data-close=true "+(d?"":" disabled")+" "+j.ariaAttr({controls:e.$node[0].id})),r.klass.footer)},h.defaults=function(b){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",closeOnSelect:!0,closeOnClear:!0,updateInput:!0,format:"d mmmm, yyyy",klass:{table:b+"table",header:b+"header",navPrev:b+"nav--prev",navNext:b+"nav--next",navDisabled:b+"nav--disabled",month:b+"month",year:b+"year",selectMonth:b+"select--month",selectYear:b+"select--year",weekdays:b+"weekday",day:b+"day",disabled:b+"day--disabled",selected:b+"day--selected",highlighted:b+"day--highlighted",now:b+"day--today",infocus:b+"day--infocus",outfocus:b+"day--outfocus",footer:b+"footer",buttonClear:b+"button--clear",buttonToday:b+"button--today",buttonClose:b+"button--close"}}}(f.klasses().picker+"__"),f.extend("pickadate",h)});