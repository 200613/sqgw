"use strict";function _typeof(b){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function a(c){return typeof c}}else{a=function a(c){return c&&typeof Symbol==="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c}}return a(b)}function _possibleConstructorReturn(b,a){if(a&&(_typeof(a)==="object"||typeof a==="function")){return a}return _assertThisInitialized(b)}function _getPrototypeOf(b){a=Object.setPrototypeOf?Object.getPrototypeOf:function a(c){return c.__proto__||Object.getPrototypeOf(c)};return a(b)}function _assertThisInitialized(a){if(a===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a}function _inherits(a,b){if(typeof b!=="function"&&b!==null){throw new TypeError("Super expression must either be null or a function")}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:true,configurable:true}});if(b){_setPrototypeOf(a,b)}}function _setPrototypeOf(b,c){a=Object.setPrototypeOf||function a(d,e){d.__proto__=e;return d};return a(b,c)}function _classCallCheck(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||false;a.configurable=true;if("value" in a){a.writable=true}Object.defineProperty(d,a.key,a)}}function _createClass(a,b,c){if(b){_defineProperties(a.prototype,b)}if(c){_defineProperties(a,c)}return a}var Emitter=function(){function b(){_classCallCheck(this,b)}_createClass(b,[{key:"on",value:function d(e,f){this._callbacks=this._callbacks||{};if(!this._callbacks[e]){this._callbacks[e]=[]}this._callbacks[e].push(f);return this}},{key:"emit",value:function a(p){this._callbacks=this._callbacks||{};var n=this._callbacks[p];if(n){for(var j=arguments.length,l=new Array(j>1?j-1:0),i=1;i<j;i++){l[i-1]=arguments[i]}var h=true;var e=false;var g=undefined;try{for(var f=n[Symbol.iterator](),k;!(h=(k=f.next()).done);h=true){var m=k.value;m.apply(this,l)}}catch(o){e=true;g=o}finally{try{if(!h&&f["return"]!=null){f["return"]()}}finally{if(e){throw g}}}}return this}},{key:"off",value:function c(g,h){if(!this._callbacks||arguments.length===0){this._callbacks={};return this}var f=this._callbacks[g];if(!f){return this}if(arguments.length===1){delete this._callbacks[g];return this}for(var j=0;j<f.length;j++){var e=f[j];if(e===h){f.splice(j,1);break}}return this}}]);return b}();var Dropzone=function(d){_inherits(B,d);_createClass(B,null,[{key:"initClass",value:function S(){this.prototype.Emitter=Emitter;this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"];this.prototype.defaultOptions={url:null,method:"post",withCredentials:false,timeout:30000,parallelUploads:2,uploadMultiple:false,chunking:false,forceChunking:false,chunkSize:2000000,parallelChunkUploads:false,retryChunks:false,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:0.8,resizeMethod:"contain",filesizeBase:1000,maxFiles:null,headers:null,clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,autoQueue:true,addRemoveLinks:true,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:false,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function aA(){},params:function aD(aU,aV,aT){if(aT){return{dzuuid:aT.file.upload.uuid,dzchunkindex:aT.index,dztotalfilesize:aT.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:aT.file.upload.totalChunkCount,dzchunkbyteoffset:aT.index*this.options.chunkSize}}},accept:function ai(aU,aT){return aT()},chunksUploaded:function an(aU,aT){aT()},fallback:function az(){var a0;this.element.className="".concat(this.element.className," dz-browser-not-supported");var aW=true;var aT=false;var aV=undefined;try{for(var aU=this.element.getElementsByTagName("div")[Symbol.iterator](),aX;!(aW=(aX=aU.next()).done);aW=true){var aY=aX.value;if(/(^| )dz-message($| )/.test(aY.className)){a0=aY;aY.className="dz-message";break}}}catch(aZ){aT=true;aV=aZ}finally{try{if(!aW&&aU["return"]!=null){aU["return"]()}}finally{if(aT){throw aV}}}if(!a0){a0=B.createElement('<div class="dz-message"><span></span></div>');this.element.appendChild(a0)}var a1=a0.getElementsByTagName("span")[0];if(a1){if(a1.textContent!=null){a1.textContent=this.options.dictFallbackMessage}else{if(a1.innerText!=null){a1.innerText=this.options.dictFallbackMessage}}}return this.element.appendChild(this.getFallbackForm())},resize:function aK(aT,aZ,aU,aW){var aV={srcX:0,srcY:0,srcWidth:aT.width,srcHeight:aT.height};var aX=aT.width/aT.height;if(aZ==null&&aU==null){aZ=aV.srcWidth;aU=aV.srcHeight}else{if(aZ==null){aZ=aU*aX}else{if(aU==null){aU=aZ/aX}}}aZ=Math.min(aZ,aV.srcWidth);aU=Math.min(aU,aV.srcHeight);var aY=aZ/aU;if(aV.srcWidth>aZ||aV.srcHeight>aU){if(aW==="crop"){if(aX>aY){aV.srcHeight=aT.height;aV.srcWidth=aV.srcHeight*aY}else{aV.srcWidth=aT.width;aV.srcHeight=aV.srcWidth/aY}}else{if(aW==="contain"){if(aX>aY){aU=aZ/aX}else{aZ=aU*aX}}else{throw new Error("Unknown resizeMethod '".concat(aW,"'"))}}}aV.srcX=(aT.width-aV.srcWidth)/2;aV.srcY=(aT.height-aV.srcHeight)/2;aV.trgWidth=aZ;aV.trgHeight=aU;return aV},transformFile:function aR(aU,aT){if((this.options.resizeWidth||this.options.resizeHeight)&&aU.type.match(/image.*/)){return this.resizeImage(aU,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,aT)}else{return aT(aU)}},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Check</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Error</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function aw(aT){return this.element.classList.remove("dz-drag-hover")},dragstart:function av(aT){},dragend:function aq(aT){return this.element.classList.remove("dz-drag-hover")},dragenter:function ar(aT){return this.element.classList.add("dz-drag-hover")},dragover:function au(aT){return this.element.classList.add("dz-drag-hover")},dragleave:function at(aT){return this.element.classList.remove("dz-drag-hover")},paste:function aE(aT){},reset:function aJ(){return this.element.classList.remove("dz-started")},addedfile:function aj(ba){var a8=this;if(this.element===this.previewsContainer){this.element.classList.add("dz-started")}if(this.previewsContainer){ba.previewElement=B.createElement(this.options.previewTemplate.trim());ba.previewTemplate=ba.previewElement;this.previewsContainer.appendChild(ba.previewElement);var a2=true;var aT=false;var aZ=undefined;try{for(var aW=ba.previewElement.querySelectorAll("[data-dz-name]")[Symbol.iterator](),a5;!(a2=(a5=aW.next()).done);a2=true){var bb=a5.value;bb.textContent=ba.name}}catch(a9){aT=true;aZ=a9}finally{try{if(!a2&&aW["return"]!=null){aW["return"]()}}finally{if(aT){throw aZ}}}var a3=true;var aU=false;var a0=undefined;try{for(var aX=ba.previewElement.querySelectorAll("[data-dz-size]")[Symbol.iterator](),a6;!(a3=(a6=aX.next()).done);a3=true){bb=a6.value;bb.innerHTML=this.filesize(ba.size)}}catch(a9){aU=true;a0=a9}finally{try{if(!a3&&aX["return"]!=null){aX["return"]()}}finally{if(aU){throw a0}}}if(this.options.addRemoveLinks){ba._removeLink=B.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>"));ba.previewElement.appendChild(ba._removeLink)}var bc=function bc(be){be.preventDefault();be.stopPropagation();if(ba.status===B.UPLOADING){return B.confirm(a8.options.dictCancelUploadConfirmation,function(){return a8.removeFile(ba)})}else{if(a8.options.dictRemoveFileConfirmation){return B.confirm(a8.options.dictRemoveFileConfirmation,function(){return a8.removeFile(ba)})}else{return a8.removeFile(ba)}}};var a4=true;var aV=false;var a1=undefined;try{for(var aY=ba.previewElement.querySelectorAll("[data-dz-remove]")[Symbol.iterator](),a7;!(a4=(a7=aY.next()).done);a4=true){var bd=a7.value;bd.addEventListener("click",bc)}}catch(a9){aV=true;a1=a9}finally{try{if(!a4&&aY["return"]!=null){aY["return"]()}}finally{if(aV){throw a1}}}}},removedfile:function aI(aT){if(aT.previewElement!=null&&aT.previewElement.parentNode!=null){aT.previewElement.parentNode.removeChild(aT.previewElement)}return this._updateMaxFilesReachedClass()},thumbnail:function aP(a0,aY){if(a0.previewElement){a0.previewElement.classList.remove("dz-file-preview");var aW=true;var aT=false;var aV=undefined;try{for(var aU=a0.previewElement.querySelectorAll("[data-dz-thumbnail]")[Symbol.iterator](),aX;!(aW=(aX=aU.next()).done);aW=true){var a1=aX.value;a1.alt=a0.name;a1.src=aY}}catch(aZ){aT=true;aV=aZ}finally{try{if(!aW&&aU["return"]!=null){aU["return"]()}}finally{if(aT){throw aV}}}return setTimeout(function(){return a0.previewElement.classList.add("dz-image-preview")},1)}},error:function ax(aZ,a0){if(aZ.previewElement){aZ.previewElement.classList.add("dz-error");if(typeof a0!=="String"&&a0.error){a0=a0.error}var aW=true;var aT=false;var aV=undefined;try{for(var aU=aZ.previewElement.querySelectorAll("[data-dz-errormessage]")[Symbol.iterator](),aX;!(aW=(aX=aU.next()).done);aW=true){var a1=aX.value;a1.textContent=a0}}catch(aY){aT=true;aV=aY}finally{try{if(!aW&&aU["return"]!=null){aU["return"]()}}finally{if(aT){throw aV}}}}},errormultiple:function ay(){},processing:function aF(aT){if(aT.previewElement){aT.previewElement.classList.add("dz-processing");if(aT._removeLink){return aT._removeLink.innerHTML=this.options.dictCancelUpload}}},processingmultiple:function aG(){},uploadprogress:function aS(a0,a2,aY){if(a0.previewElement){var aW=true;var aT=false;var aV=undefined;try{for(var aU=a0.previewElement.querySelectorAll("[data-dz-uploadprogress]")[Symbol.iterator](),aX;!(aW=(aX=aU.next()).done);aW=true){var a1=aX.value;a1.nodeName==="PROGRESS"?a1.value=a2:a1.style.width="".concat(a2,"%")}}catch(aZ){aT=true;aV=aZ}finally{try{if(!aW&&aU["return"]!=null){aU["return"]()}}finally{if(aT){throw aV}}}}},totaluploadprogress:function aQ(){},sending:function aL(){},sendingmultiple:function aM(){},success:function aN(aT){if(aT.previewElement){return aT.previewElement.classList.add("dz-success")}},successmultiple:function aO(){},canceled:function al(aT){return this.emit("error",aT,this.options.dictUploadCanceled)},canceledmultiple:function am(){},complete:function ao(aT){if(aT._removeLink){aT._removeLink.innerHTML=this.options.dictRemoveFile}if(aT.previewElement){return aT.previewElement.classList.add("dz-complete")}},completemultiple:function ap(){},maxfilesexceeded:function aB(){},maxfilesreached:function aC(){},queuecomplete:function aH(){},addedfiles:function ak(){}};this.prototype._thumbnailQueue=[];this.prototype._processingThumbnail=false}},{key:"extend",value:function F(ap){for(var ak=arguments.length,ao=new Array(ak>1?ak-1:0),aj=1;aj<ak;aj++){ao[aj-1]=arguments[aj]}for(var ai=0,al=ao;ai<al.length;ai++){var an=al[ai];for(var am in an){var aq=an[am];ap[am]=aq}}return ap}}]);function B(aj,an){var ai;_classCallCheck(this,B);ai=_possibleConstructorReturn(this,_getPrototypeOf(B).call(this));var al,am;ai.element=aj;ai.version=B.version;ai.defaultOptions.previewTemplate=ai.defaultOptions.previewTemplate.replace(/\n*/g,"");ai.clickableElements=[];ai.listeners=[];ai.files=[];if(typeof ai.element==="string"){ai.element=document.querySelector(ai.element)}if(!ai.element||ai.element.nodeType==null){throw new Error("Invalid dropzone element.")}if(ai.element.dropzone){throw new Error("Dropzone already attached.")}B.instances.push(_assertThisInitialized(ai));ai.element.dropzone=_assertThisInitialized(ai);var ak=(am=B.optionsForElement(ai.element))!=null?am:{};ai.options=B.extend({},ai.defaultOptions,ak,an!=null?an:{});if(ai.options.forceFallback||!B.isBrowserSupported()){return _possibleConstructorReturn(ai,ai.options.fallback.call(_assertThisInitialized(ai)))}if(ai.options.url==null){ai.options.url=ai.element.getAttribute("action")}if(!ai.options.url){throw new Error("No URL provided.")}if(ai.options.acceptedFiles&&ai.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")}if(ai.options.uploadMultiple&&ai.options.chunking){throw new Error("You cannot set both: uploadMultiple and chunking.")}if(ai.options.acceptedMimeTypes){ai.options.acceptedFiles=ai.options.acceptedMimeTypes;delete ai.options.acceptedMimeTypes}if(ai.options.renameFilename!=null){ai.options.renameFile=function(ao){return ai.options.renameFilename.call(_assertThisInitialized(ai),ao.name,ao)}}ai.options.method=ai.options.method.toUpperCase();if((al=ai.getExistingFallback())&&al.parentNode){al.parentNode.removeChild(al)}if(ai.options.previewsContainer!==false){if(ai.options.previewsContainer){ai.previewsContainer=B.getElement(ai.options.previewsContainer,"previewsContainer")}else{ai.previewsContainer=ai.element}}if(ai.options.clickable){if(ai.options.clickable===true){ai.clickableElements=[ai.element]}else{ai.clickableElements=B.getElements(ai.options.clickable,"clickable")}}ai.init();return ai}_createClass(B,[{key:"getAcceptedFiles",value:function H(){return this.files.filter(function(ai){return ai.accepted}).map(function(ai){return ai})}},{key:"getRejectedFiles",value:function O(){return this.files.filter(function(ai){return !ai.accepted}).map(function(ai){return ai})}},{key:"getFilesWithStatus",value:function M(ai){return this.files.filter(function(aj){return aj.status===ai}).map(function(aj){return aj})}},{key:"getQueuedFiles",value:function N(){return this.getFilesWithStatus(B.QUEUED)}},{key:"getUploadingFiles",value:function P(){return this.getFilesWithStatus(B.UPLOADING)}},{key:"getAddedFiles",value:function J(){return this.getFilesWithStatus(B.ADDED)}},{key:"getActiveFiles",value:function I(){return this.files.filter(function(ai){return ai.status===B.UPLOADING||ai.status===B.QUEUED}).map(function(ai){return ai})}},{key:"init",value:function R(){var an=this;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data")}if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(B.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>")))}if(this.clickableElements.length){var az=function az(){if(an.hiddenFileInput){an.hiddenFileInput.parentNode.removeChild(an.hiddenFileInput)}an.hiddenFileInput=document.createElement("input");an.hiddenFileInput.setAttribute("type","file");if(an.options.maxFiles===null||an.options.maxFiles>1){an.hiddenFileInput.setAttribute("multiple","multiple")}an.hiddenFileInput.className="dz-hidden-input";if(an.options.acceptedFiles!==null){an.hiddenFileInput.setAttribute("accept",an.options.acceptedFiles)}if(an.options.capture!==null){an.hiddenFileInput.setAttribute("capture",an.options.capture)}an.hiddenFileInput.style.visibility="hidden";an.hiddenFileInput.style.position="absolute";an.hiddenFileInput.style.top="0";an.hiddenFileInput.style.left="0";an.hiddenFileInput.style.height="0";an.hiddenFileInput.style.width="0";B.getElement(an.options.hiddenInputContainer,"hiddenInputContainer").appendChild(an.hiddenFileInput);return an.hiddenFileInput.addEventListener("change",function(){var aH=an.hiddenFileInput.files;if(aH.length){var aD=true;var aA=false;var aC=undefined;try{for(var aB=aH[Symbol.iterator](),aE;!(aD=(aE=aB.next()).done);aD=true){var aG=aE.value;an.addFile(aG)}}catch(aF){aA=true;aC=aF}finally{try{if(!aD&&aB["return"]!=null){aB["return"]()}}finally{if(aA){throw aC}}}}an.emit("addedfiles",aH);return az()})};az()}this.URL=window.URL!==null?window.URL:window.webkitURL;var al=true;var ai=false;var ak=undefined;try{for(var aj=this.events[Symbol.iterator](),am;!(al=(am=aj.next()).done);al=true){var ax=am.value;this.on(ax,this.options[ax])}}catch(aw){ai=true;ak=aw}finally{try{if(!al&&aj["return"]!=null){aj["return"]()}}finally{if(ai){throw ak}}}this.on("uploadprogress",function(){return an.updateTotalUploadProgress()});this.on("removedfile",function(){return an.updateTotalUploadProgress()});this.on("canceled",function(aA){return an.emit("complete",aA)});this.on("complete",function(aA){if(an.getAddedFiles().length===0&&an.getUploadingFiles().length===0&&an.getQueuedFiles().length===0){return setTimeout(function(){return an.emit("queuecomplete")},0)}});var ao=function ao(aA){return aA.dataTransfer.types&&aA.dataTransfer.types.some(function(aB){return aB=="Files"})};var ay=function ay(aA){if(!ao(aA)){return}aA.stopPropagation();if(aA.preventDefault){return aA.preventDefault()}else{return aA.returnValue=false}};this.listeners=[{element:this.element,events:{dragstart:function au(aA){return an.emit("dragstart",aA)},dragenter:function aq(aA){ay(aA);return an.emit("dragenter",aA)},dragover:function at(aA){var aB;try{aB=aA.dataTransfer.effectAllowed}catch(aC){}aA.dataTransfer.dropEffect="move"===aB||"linkMove"===aB?"move":"copy";ay(aA);return an.emit("dragover",aA)},dragleave:function ar(aA){return an.emit("dragleave",aA)},drop:function av(aA){ay(aA);return an.drop(aA)},dragend:function ap(aA){return an.emit("dragend",aA)}}}];this.clickableElements.forEach(function(aB){return an.listeners.push({element:aB,events:{click:function aA(aC){if(aB!==an.element||aC.target===an.element||B.elementInside(aC.target,an.element.querySelector(".dz-message"))){an.hiddenFileInput.click()}return true}}})});this.enable();return this.options.init.call(this)}},{key:"destroy",value:function x(){this.disable();this.removeAllFiles(true);if(this.hiddenFileInput!=null?this.hiddenFileInput.parentNode:undefined){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null}delete this.element.dropzone;return B.instances.splice(B.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function ae(){var at;var ar=0;var aq=0;var an=this.getActiveFiles();if(an.length){var al=true;var ai=false;var ak=undefined;try{for(var aj=this.getActiveFiles()[Symbol.iterator](),am;!(al=(am=aj.next()).done);al=true){var ap=am.value;ar+=ap.upload.bytesSent;aq+=ap.upload.total}}catch(ao){ai=true;ak=ao}finally{try{if(!al&&aj["return"]!=null){aj["return"]()}}finally{if(ai){throw ak}}}at=100*ar/aq}else{at=100}return this.emit("totaluploadprogress",at,aq,ar)}},{key:"_getParamName",value:function k(ai){if(typeof this.options.paramName==="function"){return this.options.paramName(ai)}else{return"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(ai,"]"):"")}}},{key:"_renameFile",value:function n(ai){if(typeof this.options.renameFile!=="function"){return ai.name}return this.options.renameFile(ai)}},{key:"getFallbackForm",value:function L(){var ai,al;if(ai=this.getExistingFallback()){return ai}var ak='<div class="dz-fallback">';if(this.options.dictFallbackText){ak+="<p>".concat(this.options.dictFallbackText,"</p>")}ak+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':undefined,' /><input type="submit" value="Upload!"></div>');var aj=B.createElement(ak);if(this.element.tagName!=="FORM"){al=B.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'));al.appendChild(aj)}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method)}return al!=null?al:aj}},{key:"getExistingFallback",value:function K(){var al=function al(au){var aq=true;var an=false;var ap=undefined;try{for(var ao=au[Symbol.iterator](),ar;!(aq=(ar=ao.next()).done);aq=true){var at=ar.value;if(/(^| )fallback($| )/.test(at.className)){return at}}}catch(av){an=true;ap=av}finally{try{if(!aq&&ao["return"]!=null){ao["return"]()}}finally{if(an){throw ap}}}};for(var aj=0,ai=["div","form"];aj<ai.length;aj++){var am=ai[aj];var ak;if(ak=al(this.element.getElementsByTagName(am))){return ak}}}},{key:"setupEventListeners",value:function ac(){return this.listeners.map(function(ai){return function(){var al=[];for(var aj in ai.events){var ak=ai.events[aj];al.push(ai.element.addEventListener(aj,ak,false))}return al}()})}},{key:"removeEventListeners",value:function Y(){return this.listeners.map(function(ai){return function(){var al=[];for(var aj in ai.events){var ak=ai.events[aj];al.push(ai.element.removeEventListener(aj,ak,false))}return al}()})}},{key:"disable",value:function y(){var ai=this;this.clickableElements.forEach(function(aj){return aj.classList.remove("dz-clickable")});this.removeEventListeners();this.disabled=true;return this.files.map(function(aj){return ai.cancelUpload(aj)})}},{key:"enable",value:function C(){delete this.disabled;this.clickableElements.forEach(function(ai){return ai.classList.add("dz-clickable")});return this.setupEventListeners()}},{key:"filesize",value:function G(am){var ak=0;var al="b";if(am>0){var ao=["tb","gb","mb","kb","b"];for(var aj=0;aj<ao.length;aj++){var an=ao[aj];var ai=Math.pow(this.options.filesizeBase,4-aj)/10;if(am>=ai){ak=am/Math.pow(this.options.filesizeBase,4-aj);al=an;break}}ak=Math.round(10*ak)/10}return"<strong>".concat(ak,"</strong> ").concat(this.options.dictFileSizeUnits[al])}},{key:"_updateMaxFilesReachedClass",value:function q(){if(this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit("maxfilesreached",this.files)}return this.element.classList.add("dz-max-files-reached")}else{return this.element.classList.remove("dz-max-files-reached")}}},{key:"drop",value:function A(ai){if(!ai.dataTransfer){return}this.emit("drop",ai);var aj=[];for(var ak=0;ak<ai.dataTransfer.files.length;ak++){aj[ak]=ai.dataTransfer.files[ak]}if(aj.length){var al=ai.dataTransfer.items;if(al&&al.length&&al[0].webkitGetAsEntry!=null){this._addFilesFromItems(al)}else{this.handleFiles(aj)}}this.emit("addedfiles",aj)}},{key:"paste",value:function T(ai){if(__guard__(ai!=null?ai.clipboardData:undefined,function(ak){return ak.items})==null){return}this.emit("paste",ai);var aj=ai.clipboardData.items;if(aj.length){return this._addFilesFromItems(aj)}}},{key:"handleFiles",value:function Q(ap){var al=true;var ai=false;var ak=undefined;try{for(var aj=ap[Symbol.iterator](),am;!(al=(am=aj.next()).done);al=true){var ao=am.value;this.addFile(ao)}}catch(an){ai=true;ak=an}finally{try{if(!al&&aj["return"]!=null){aj["return"]()}}finally{if(ai){throw ak}}}}},{key:"_addFilesFromItems",value:function b(aj){var ai=this;return function(){var at=[];var an=true;var ak=false;var am=undefined;try{for(var al=aj[Symbol.iterator](),ao;!(an=(ao=al.next()).done);an=true){var ar=ao.value;var ap;if(ar.webkitGetAsEntry!=null&&(ap=ar.webkitGetAsEntry())){if(ap.isFile){at.push(ai.addFile(ar.getAsFile()))}else{if(ap.isDirectory){at.push(ai._addFilesFromDirectory(ap,ap.name))}else{at.push(undefined)}}}else{if(ar.getAsFile!=null){if(ar.kind==null||ar.kind==="file"){at.push(ai.addFile(ar.getAsFile()))}else{at.push(undefined)}}else{at.push(undefined)}}}}catch(aq){ak=true;am=aq}finally{try{if(!an&&al["return"]!=null){al["return"]()}}finally{if(ak){throw am}}}return at}()}},{key:"_addFilesFromDirectory",value:function a(aj,am){var ai=this;var ak=aj.createReader();var al=function al(ao){return __guardMethod__(console,"log",function(ap){return ap.log(ao)})};var an=function an(){return ak.readEntries(function(au){if(au.length>0){var ar=true;var ao=false;var aq=undefined;try{for(var ap=au[Symbol.iterator](),at;!(ar=(at=ap.next()).done);ar=true){var av=at.value;if(av.isFile){av.file(function(ax){if(ai.options.ignoreHiddenFiles&&ax.name.substring(0,1)==="."){return}ax.fullPath="".concat(am,"/").concat(ax.name);return ai.addFile(ax)})}else{if(av.isDirectory){ai._addFilesFromDirectory(av,"".concat(am,"/").concat(av.name))}}}}catch(aw){ao=true;aq=aw}finally{try{if(!ar&&ap["return"]!=null){ap["return"]()}}finally{if(ao){throw aq}}}an()}return null},al)};return an()}},{key:"accept",value:function s(aj,ai){if(this.options.maxFilesize&&aj.size>this.options.maxFilesize*1024*1024){ai(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(aj.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize))}else{if(!B.isValidFile(aj,this.options.acceptedFiles)){ai(this.options.dictInvalidFileType)}else{if(this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles){ai(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));this.emit("maxfilesexceeded",aj)}else{this.options.accept.call(this,aj,ai)}}}}},{key:"addFile",value:function t(aj){var ai=this;aj.upload={uuid:B.uuidv4(),progress:0,total:aj.size,bytesSent:0,filename:this._renameFile(aj)};this.files.push(aj);aj.status=B.ADDED;this.emit("addedfile",aj);this._enqueueThumbnail(aj);this.accept(aj,function(ak){if(ak){aj.accepted=false;ai._errorProcessing([aj],ak)}else{aj.accepted=true;if(ai.options.autoQueue){ai.enqueueFile(aj)}}ai._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function E(ap){var al=true;var ai=false;var ak=undefined;try{for(var aj=ap[Symbol.iterator](),am;!(al=(am=aj.next()).done);al=true){var ao=am.value;this.enqueueFile(ao)}}catch(an){ai=true;ak=an}finally{try{if(!al&&aj["return"]!=null){aj["return"]()}}finally{if(ai){throw ak}}}return null}},{key:"enqueueFile",value:function D(aj){var ai=this;if(aj.status===B.ADDED&&aj.accepted===true){aj.status=B.QUEUED;if(this.options.autoProcessQueue){return setTimeout(function(){return ai.processQueue()},0)}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.")}}},{key:"_enqueueThumbnail",value:function e(aj){var ai=this;if(this.options.createImageThumbnails&&aj.type.match(/image.*/)&&aj.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(aj);return setTimeout(function(){return ai._processThumbnailQueue()},0)}}},{key:"_processThumbnailQueue",value:function m(){var ai=this;if(this._processingThumbnail||this._thumbnailQueue.length===0){return}this._processingThumbnail=true;var aj=this._thumbnailQueue.shift();return this.createThumbnail(aj,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,true,function(ak){ai.emit("thumbnail",aj,ak);ai._processingThumbnail=false;return ai._processThumbnailQueue()})}},{key:"removeFile",value:function Z(ai){if(ai.status===B.UPLOADING){this.cancelUpload(ai)}this.files=without(this.files,ai);this.emit("removedfile",ai);if(this.files.length===0){return this.emit("reset")}}},{key:"removeAllFiles",value:function X(an){if(an==null){an=false}var al=true;var ai=false;var ak=undefined;try{for(var aj=this.files.slice()[Symbol.iterator](),am;!(al=(am=aj.next()).done);al=true){var ap=am.value;if(ap.status!==B.UPLOADING||an){this.removeFile(ap)}}}catch(ao){ai=true;ak=ao}finally{try{if(!al&&aj["return"]!=null){aj["return"]()}}finally{if(ai){throw ak}}}return null}},{key:"resizeImage",value:function aa(ak,an,al,am,aj){var ai=this;return this.createThumbnail(ak,an,al,am,true,function(ap,ao){if(ao==null){return aj(ak)}else{var ar=ai.options.resizeMimeType;if(ar==null){ar=ak.type}var aq=ao.toDataURL(ar,ai.options.resizeQuality);if(ar==="image/jpeg"||ar==="image/jpg"){aq=ExifRestore.restore(ak.dataURL,aq)}return aj(B.dataURItoBlob(aq))}})}},{key:"createThumbnail",value:function v(ak,ap,an,ao,am,aj){var ai=this;var al=new FileReader();al.onload=function(){ak.dataURL=al.result;if(ak.type==="image/svg+xml"){if(aj!=null){aj(al.result)}return}ai.createThumbnailFromUrl(ak,ap,an,ao,am,aj)};al.readAsDataURL(ak)}},{key:"displayExistingFile",value:function z(am,al,aj,ak){var ai=this;var ao=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;this.emit("addedfile",am);this.emit("complete",am);if(!ao){this.emit("thumbnail",am,al);if(aj){aj()}}else{var an=function an(ap){ai.emit("thumbnail",am,ap);if(aj){aj()}};am.dataURL=al;this.createThumbnailFromUrl(am,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.resizeMethod,this.options.fixOrientation,an,ak)}}},{key:"createThumbnailFromUrl",value:function w(al,aq,an,ap,am,aj,ak){var ai=this;var ao=document.createElement("img");if(ak){ao.crossOrigin=ak}ao.onload=function(){var ar=function ar(at){return at(1)};if(typeof EXIF!=="undefined"&&EXIF!==null&&am){ar=function ar(at){return EXIF.getData(ao,function(){return at(EXIF.getTag(this,"Orientation"))})}}return ar(function(av){al.width=ao.width;al.height=ao.height;var aw=ai.options.resize.call(ai,al,aq,an,ap);var at=document.createElement("canvas");var au=at.getContext("2d");at.width=aw.trgWidth;at.height=aw.trgHeight;if(av>4){at.width=aw.trgHeight;at.height=aw.trgWidth}switch(av){case 2:au.translate(at.width,0);au.scale(-1,1);break;case 3:au.translate(at.width,at.height);au.rotate(Math.PI);break;case 4:au.translate(0,at.height);au.scale(1,-1);break;case 5:au.rotate(0.5*Math.PI);au.scale(1,-1);break;case 6:au.rotate(0.5*Math.PI);au.translate(0,-at.width);break;case 7:au.rotate(0.5*Math.PI);au.translate(at.height,-at.width);au.scale(-1,1);break;case 8:au.rotate(-0.5*Math.PI);au.translate(-at.height,0);break}drawImageIOSFix(au,ao,aw.srcX!=null?aw.srcX:0,aw.srcY!=null?aw.srcY:0,aw.srcWidth,aw.srcHeight,aw.trgX!=null?aw.trgX:0,aw.trgY!=null?aw.trgY:0,aw.trgWidth,aw.trgHeight);var ax=at.toDataURL("image/png");if(aj!=null){return aj(ax,at)}})};if(aj!=null){ao.onerror=aj}return ao.src=al.dataURL}},{key:"processQueue",value:function W(){var aj=this.options.parallelUploads;var ak=this.getUploadingFiles().length;var ai=ak;if(ak>=aj){return}var al=this.getQueuedFiles();if(!(al.length>0)){return}if(this.options.uploadMultiple){return this.processFiles(al.slice(0,aj-ak))}else{while(ai<aj){if(!al.length){return}this.processFile(al.shift());ai++}}}},{key:"processFile",value:function U(ai){return this.processFiles([ai])}},{key:"processFiles",value:function V(ap){var al=true;var ai=false;var ak=undefined;try{for(var aj=ap[Symbol.iterator](),am;!(al=(am=aj.next()).done);al=true){var ao=am.value;ao.processing=true;ao.status=B.UPLOADING;this.emit("processing",ao)}}catch(an){ai=true;ak=an}finally{try{if(!al&&aj["return"]!=null){aj["return"]()}}finally{if(ai){throw ak}}}if(this.options.uploadMultiple){this.emit("processingmultiple",ap)}return this.uploadFiles(ap)}},{key:"_getFilesWithXhr",value:function j(aj){var ai;return ai=this.files.filter(function(ak){return ak.xhr===aj}).map(function(ak){return ak})}},{key:"cancelUpload",value:function u(av){if(av.status===B.UPLOADING){var ax=this._getFilesWithXhr(av.xhr);var ap=true;var ai=false;var an=undefined;try{for(var al=ax[Symbol.iterator](),ar;!(ap=(ar=al.next()).done);ap=true){var aw=ar.value;aw.status=B.CANCELED}}catch(au){ai=true;an=au}finally{try{if(!ap&&al["return"]!=null){al["return"]()}}finally{if(ai){throw an}}}if(typeof av.xhr!=="undefined"){av.xhr.abort()}var aq=true;var aj=false;var ao=undefined;try{for(var am=ax[Symbol.iterator](),at;!(aq=(at=am.next()).done);aq=true){var ak=at.value;this.emit("canceled",ak)}}catch(au){aj=true;ao=au}finally{try{if(!aq&&am["return"]!=null){am["return"]()}}finally{if(aj){throw ao}}}if(this.options.uploadMultiple){this.emit("canceledmultiple",ax)}}else{if(av.status===B.ADDED||av.status===B.QUEUED){av.status=B.CANCELED;this.emit("canceled",av);if(this.options.uploadMultiple){this.emit("canceledmultiple",[av])}}}if(this.options.autoProcessQueue){return this.processQueue()}}},{key:"resolveOption",value:function ab(al){if(typeof al==="function"){for(var aj=arguments.length,ak=new Array(aj>1?aj-1:0),ai=1;ai<aj;ai++){ak[ai-1]=arguments[ai]}return al.apply(this,ak)}return al}},{key:"uploadFile",value:function af(ai){return this.uploadFiles([ai])}},{key:"uploadFiles",value:function ag(aj){var ai=this;this._transformFiles(aj,function(at){if(ai.options.chunking){var ar=at[0];aj[0].upload.chunked=ai.options.chunking&&(ai.options.forceChunking||ar.size>ai.options.chunkSize);aj[0].upload.totalChunkCount=Math.ceil(ar.size/ai.options.chunkSize)}if(aj[0].upload.chunked){var an=aj[0];var al=at[0];var aq=0;an.upload.chunks=[];var ao=function ao(){var au=0;while(an.upload.chunks[au]!==undefined){au++}if(au>=an.upload.totalChunkCount){return}aq++;var ax=au*ai.options.chunkSize;var aw=Math.min(ax+ai.options.chunkSize,an.size);var av={name:ai._getParamName(0),data:al.webkitSlice?al.webkitSlice(ax,aw):al.slice(ax,aw),filename:an.upload.filename,chunkIndex:au};an.upload.chunks[au]={file:an,index:au,dataBlock:av,status:B.UPLOADING,progress:0,retries:0};ai._uploadData(aj,[av])};an.upload.finishedChunkUpload=function(av){var au=true;av.status=B.SUCCESS;av.dataBlock=null;av.xhr=null;for(var aw=0;aw<an.upload.totalChunkCount;aw++){if(an.upload.chunks[aw]===undefined){return ao()}if(an.upload.chunks[aw].status!==B.SUCCESS){au=false}}if(au){ai.options.chunksUploaded(an,function(){ai._finished(aj,"",null)})}};if(ai.options.parallelChunkUploads){for(var ap=0;ap<an.upload.totalChunkCount;ap++){ao()}}else{ao()}}else{var am=[];for(var ak=0;ak<aj.length;ak++){am[ak]={name:ai._getParamName(ak),data:at[ak],filename:aj[ak].upload.filename}}ai._uploadData(aj,am)}})}},{key:"_getChunk",value:function i(ai,ak){for(var aj=0;aj<ai.upload.totalChunkCount;aj++){if(ai.upload.chunks[aj]!==undefined&&ai.upload.chunks[aj].xhr===ak){return ai.upload.chunks[aj]}}}},{key:"_uploadData",value:function r(aA,ax){var au=this;var aL=new XMLHttpRequest();var ap=true;var ai=false;var an=undefined;try{for(var al=aA[Symbol.iterator](),ar;!(ap=(ar=al.next()).done);ap=true){var az=ar.value;az.xhr=aL}}catch(ay){ai=true;an=ay}finally{try{if(!ap&&al["return"]!=null){al["return"]()}}finally{if(ai){throw an}}}if(aA[0].upload.chunked){aA[0].upload.chunks[ax[0].chunkIndex].xhr=aL}var aH=this.resolveOption(this.options.method,aA);var aJ=this.resolveOption(this.options.url,aA);aL.open(aH,aJ,true);aL.timeout=this.resolveOption(this.options.timeout,aA);aL.withCredentials=!!this.options.withCredentials;aL.onload=function(aM){au._finishedUploading(aA,aL,aM)};aL.ontimeout=function(){au._handleUploadError(aA,aL,"Request timedout after ".concat(au.options.timeout," seconds"))};aL.onerror=function(){au._handleUploadError(aA,aL)};var aI=aL.upload!=null?aL.upload:aL;aI.onprogress=function(aM){return au._updateFilesUploadProgress(aA,aL,aM)};var aD={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){B.extend(aD,this.options.headers)}for(var aC in aD){var aE=aD[aC];if(aE){aL.setRequestHeader(aC,aE)}}var aB=new FormData();if(this.options.params){var av=this.options.params;if(typeof av==="function"){av=av.call(this,aA,aL,aA[0].upload.chunked?this._getChunk(aA[0],aL):null)}for(var aG in av){var aK=av[aG];aB.append(aG,aK)}}var aq=true;var aj=false;var ao=undefined;try{for(var am=aA[Symbol.iterator](),at;!(aq=(at=am.next()).done);aq=true){var ak=at.value;this.emit("sending",ak,aL,aB)}}catch(ay){aj=true;ao=ay}finally{try{if(!aq&&am["return"]!=null){am["return"]()}}finally{if(aj){throw ao}}}if(this.options.uploadMultiple){this.emit("sendingmultiple",aA,aL,aB)}this._addFormElementData(aB);for(var aF=0;aF<ax.length;aF++){var aw=ax[aF];aB.append(aw.name,aw.data,aw.filename)}this.submitRequest(aL,aB,aA)}},{key:"_transformFiles",value:function o(am,ak){var aj=this;var ao=[];var al=0;var ai=function ai(ap){aj.options.transformFile.call(aj,am[ap],function(aq){ao[ap]=aq;if(++al===am.length){ak(ao)}})};for(var an=0;an<am.length;an++){ai(an)}}},{key:"_addFormElementData",value:function c(au){if(this.element.tagName==="FORM"){var ao=true;var ai=false;var am=undefined;try{for(var ak=this.element.querySelectorAll("input, textarea, select, button")[Symbol.iterator](),aq;!(ao=(aq=ak.next()).done);ao=true){var av=aq.value;var aw=av.getAttribute("name");var ax=av.getAttribute("type");if(ax){ax=ax.toLowerCase()}if(typeof aw==="undefined"||aw===null){continue}if(av.tagName==="SELECT"&&av.hasAttribute("multiple")){var ap=true;var aj=false;var an=undefined;try{for(var al=av.options[Symbol.iterator](),ar;!(ap=(ar=al.next()).done);ap=true){var ay=ar.value;if(ay.selected){au.append(aw,ay.value)}}}catch(at){aj=true;an=at}finally{try{if(!ap&&al["return"]!=null){al["return"]()}}finally{if(aj){throw an}}}}else{if(!ax||ax!=="checkbox"&&ax!=="radio"||av.checked){au.append(aw,av.value)}}}}catch(at){ai=true;am=at}finally{try{if(!ao&&ak["return"]!=null){ak["return"]()}}finally{if(ai){throw am}}}}}},{key:"_updateFilesUploadProgress",value:function p(aO,aS,aJ){var aR;if(typeof aJ!=="undefined"){aR=100*aJ.loaded/aJ.total;if(aO[0].upload.chunked){var aL=aO[0];var aI=this._getChunk(aL,aS);aI.progress=aR;aI.total=aJ.total;aI.bytesSent=aJ.loaded;var aN=0,aP,aM;aL.upload.progress=0;aL.upload.total=0;aL.upload.bytesSent=0;for(var aQ=0;aQ<aL.upload.totalChunkCount;aQ++){if(aL.upload.chunks[aQ]!==undefined&&aL.upload.chunks[aQ].progress!==undefined){aL.upload.progress+=aL.upload.chunks[aQ].progress;aL.upload.total+=aL.upload.chunks[aQ].total;aL.upload.bytesSent+=aL.upload.chunks[aQ].bytesSent}}aL.upload.progress=aL.upload.progress/aL.upload.totalChunkCount}else{var az=true;var ai=false;var av=undefined;try{for(var aq=aO[Symbol.iterator](),aD;!(az=(aD=aq.next()).done);az=true){var am=aD.value;am.upload.progress=aR;am.upload.total=aJ.total;am.upload.bytesSent=aJ.loaded}}catch(aK){ai=true;av=aK}finally{try{if(!az&&aq["return"]!=null){aq["return"]()}}finally{if(ai){throw av}}}}var aA=true;var aj=false;var aw=undefined;try{for(var ar=aO[Symbol.iterator](),aE;!(aA=(aE=ar.next()).done);aA=true){var an=aE.value;this.emit("uploadprogress",an,an.upload.progress,an.upload.bytesSent)}}catch(aK){aj=true;aw=aK}finally{try{if(!aA&&ar["return"]!=null){ar["return"]()}}finally{if(aj){throw aw}}}}else{var aH=true;aR=100;var aB=true;var ak=false;var ax=undefined;try{for(var at=aO[Symbol.iterator](),aF;!(aB=(aF=at.next()).done);aB=true){var ao=aF.value;if(ao.upload.progress!==100||ao.upload.bytesSent!==ao.upload.total){aH=false}ao.upload.progress=aR;ao.upload.bytesSent=ao.upload.total}}catch(aK){ak=true;ax=aK}finally{try{if(!aB&&at["return"]!=null){at["return"]()}}finally{if(ak){throw ax}}}if(aH){return}var aC=true;var al=false;var ay=undefined;try{for(var au=aO[Symbol.iterator](),aG;!(aC=(aG=au.next()).done);aC=true){var ap=aG.value;this.emit("uploadprogress",ap,aR,ap.upload.bytesSent)}}catch(aK){al=true;ay=aK}finally{try{if(!aC&&au["return"]!=null){au["return"]()}}finally{if(al){throw ay}}}}}},{key:"_finishedUploading",value:function h(ak,am,ai){var al;if(ak[0].status===B.CANCELED){return}if(am.readyState!==4){return}if(am.responseType!=="arraybuffer"&&am.responseType!=="blob"){al=am.responseText;if(am.getResponseHeader("content-type")&&~am.getResponseHeader("content-type").indexOf("application/json")){try{al=JSON.parse(al)}catch(aj){ai=aj;al="Invalid JSON response from server."}}}this._updateFilesUploadProgress(ak);if(!(200<=am.status&&am.status<300)){this._handleUploadError(ak,am,al)}else{if(ak[0].upload.chunked){ak[0].upload.finishedChunkUpload(this._getChunk(ak[0],am))}else{this._finished(ak,al,ai)}}}},{key:"_handleUploadError",value:function l(aj,al,ak){if(aj[0].status===B.CANCELED){return}if(aj[0].upload.chunked&&this.options.retryChunks){var ai=this._getChunk(aj[0],al);if(ai.retries++<this.options.retryChunksLimit){this._uploadData(aj,[ai.dataBlock]);return}else{console.warn("Retried this chunk too often. Giving up.")}}this._errorProcessing(aj,ak||this.options.dictResponseError.replace("{{statusCode}}",al.status),al)}},{key:"submitRequest",value:function ad(ak,aj,ai){ak.send(aj)}},{key:"_finished",value:function g(aq,ar,an){var al=true;var ai=false;var ak=undefined;try{for(var aj=aq[Symbol.iterator](),am;!(al=(am=aj.next()).done);al=true){var ap=am.value;ap.status=B.SUCCESS;this.emit("success",ap,ar,an);this.emit("complete",ap)}}catch(ao){ai=true;ak=ao}finally{try{if(!al&&aj["return"]!=null){aj["return"]()}}finally{if(ai){throw ak}}}if(this.options.uploadMultiple){this.emit("successmultiple",aq,ar,an);this.emit("completemultiple",aq)}if(this.options.autoProcessQueue){return this.processQueue()}}},{key:"_errorProcessing",value:function f(ap,aq,ar){var al=true;var ai=false;var ak=undefined;try{for(var aj=ap[Symbol.iterator](),am;!(al=(am=aj.next()).done);al=true){var ao=am.value;ao.status=B.ERROR;this.emit("error",ao,aq,ar);this.emit("complete",ao)}}catch(an){ai=true;ak=an}finally{try{if(!al&&aj["return"]!=null){aj["return"]()}}finally{if(ai){throw ak}}}if(this.options.uploadMultiple){this.emit("errormultiple",ap,aq,ar);this.emit("completemultiple",ap)}if(this.options.autoProcessQueue){return this.processQueue()}}}],[{key:"uuidv4",value:function ah(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ai){var aj=Math.random()*16|0,ak=ai==="x"?aj:aj&3|8;return ak.toString(16)})}}]);return B}(Emitter);Dropzone.initClass();Dropzone.version="5.7.0";Dropzone.options={};Dropzone.optionsForElement=function(a){if(a.getAttribute("id")){return Dropzone.options[camelize(a.getAttribute("id"))]}else{return undefined}};Dropzone.instances=[];Dropzone.forElement=function(a){if(typeof a==="string"){a=document.querySelector(a)}if((a!=null?a.dropzone:undefined)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")}return a.dropzone};Dropzone.autoDiscover=true;Dropzone.discover=function(){var b;if(document.querySelectorAll){b=document.querySelectorAll(".dropzone")}else{b=[];var a=function a(c){return function(){var k=[];var g=true;var d=false;var f=undefined;try{for(var e=c[Symbol.iterator](),h;!(g=(h=e.next()).done);g=true){var i=h.value;if(/(^| )dropzone($| )/.test(i.className)){k.push(b.push(i))}else{k.push(undefined)}}}catch(j){d=true;f=j}finally{try{if(!g&&e["return"]!=null){e["return"]()}}finally{if(d){throw f}}}return k}()};a(document.getElementsByTagName("div"));a(document.getElementsByTagName("form"))}return function(){var j=[];var f=true;var c=false;var e=undefined;try{for(var d=b[Symbol.iterator](),g;!(f=(g=d.next()).done);f=true){var h=g.value;if(Dropzone.optionsForElement(h)!==false){j.push(new Dropzone(h))}else{j.push(undefined)}}}catch(i){c=true;e=i}finally{try{if(!f&&d["return"]!=null){d["return"]()}}finally{if(c){throw e}}}return j}()};Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i];Dropzone.isBrowserSupported=function(){var f=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList" in document.createElement("a"))){f=false}else{var d=true;var a=false;var c=undefined;try{for(var b=Dropzone.blacklistedBrowsers[Symbol.iterator](),e;!(d=(e=b.next()).done);d=true){var h=e.value;if(h.test(navigator.userAgent)){f=false;continue}}}catch(g){a=true;c=g}finally{try{if(!d&&b["return"]!=null){b["return"]()}}finally{if(a){throw c}}}}}else{f=false}return f};Dropzone.dataURItoBlob=function(d){var c=atob(d.split(",")[1]);var h=d.split(",")[0].split(":")[1].split(";")[0];var a=new ArrayBuffer(c.length);var g=new Uint8Array(a);for(var f=0,e=c.length,b=0<=e;b?f<=e:f>=e;b?f++:f--){g[f]=c.charCodeAt(f)}return new Blob([a],{type:h})};var without=function without(a,b){return a.filter(function(c){return c!==b}).map(function(c){return c})};var camelize=function camelize(a){return a.replace(/[\-_](\w)/g,function(b){return b.charAt(1).toUpperCase()})};Dropzone.createElement=function(b){var a=document.createElement("div");a.innerHTML=b;return a.childNodes[0]};Dropzone.elementInside=function(b,a){if(b===a){return true}while(b=b.parentNode){if(b===a){return true}}return false};Dropzone.getElement=function(a,c){var b;if(typeof a==="string"){b=document.querySelector(a)}else{if(a.nodeType!=null){b=a}}if(b==null){throw new Error("Invalid `".concat(c,"` option provided. Please provide a CSS selector or a plain HTML element."))}return b};Dropzone.getElements=function(o,q){var m,n;if(o instanceof Array){n=[];try{var h=true;var a=false;var f=undefined;try{for(var c=o[Symbol.iterator](),j;!(h=(j=c.next()).done);h=true){m=j.value;n.push(this.getElement(m,q))}}catch(p){a=true;f=p}finally{try{if(!h&&c["return"]!=null){c["return"]()}}finally{if(a){throw f}}}}catch(l){n=null}}else{if(typeof o==="string"){n=[];var i=true;var b=false;var g=undefined;try{for(var d=document.querySelectorAll(o)[Symbol.iterator](),k;!(i=(k=d.next()).done);i=true){m=k.value;n.push(m)}}catch(p){b=true;g=p}finally{try{if(!i&&d["return"]!=null){d["return"]()}}finally{if(b){throw g}}}}else{if(o.nodeType!=null){n=[o]}}}if(n==null||!n.length){throw new Error("Invalid `".concat(q,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."))}return n};Dropzone.confirm=function(b,a,c){if(window.confirm(b)){return a()}else{if(c!=null){return c()}}};Dropzone.isValidFile=function(i,f){if(!f){return true}f=f.split(",");var j=i.type;var g=j.replace(/\/.*$/,"");var d=true;var a=false;var c=undefined;try{for(var b=f[Symbol.iterator](),e;!(d=(e=b.next()).done);d=true){var k=e.value;k=k.trim();if(k.charAt(0)==="."){if(i.name.toLowerCase().indexOf(k.toLowerCase(),i.name.length-k.length)!==-1){return true}}else{if(/\/\*$/.test(k)){if(g===k.replace(/\/.*$/,"")){return true}}else{if(j===k){return true}}}}}catch(h){a=true;c=h}finally{try{if(!d&&b["return"]!=null){b["return"]()}}finally{if(a){throw c}}}return false};if(typeof jQuery!=="undefined"&&jQuery!==null){jQuery.fn.dropzone=function(a){return this.each(function(){return new Dropzone(this,a)})}}if(typeof module!=="undefined"&&module!==null){module.exports=Dropzone}else{window.Dropzone=Dropzone}Dropzone.ADDED="added";Dropzone.QUEUED="queued";Dropzone.ACCEPTED=Dropzone.QUEUED;Dropzone.UPLOADING="uploading";Dropzone.PROCESSING=Dropzone.UPLOADING;Dropzone.CANCELED="canceled";Dropzone.ERROR="error";Dropzone.SUCCESS="success";var detectVerticalSquash=function detectVerticalSquash(h){var i=h.naturalWidth;var g=h.naturalHeight;var c=document.createElement("canvas");c.width=1;c.height=g;var d=c.getContext("2d");d.drawImage(h,0,0);var a=d.getImageData(1,0,1,g),e=a.data;var l=0;var f=g;var j=g;while(j>l){var b=e[(j-1)*4+3];if(b===0){f=j}else{l=j}j=f+l>>1}var k=j/g;if(k===0){return 1}else{return k}};var drawImageIOSFix=function drawImageIOSFix(a,f,i,j,h,g,d,e,c,b){var k=detectVerticalSquash(f);return a.drawImage(f,i,j,h,g,d,e,c,b/k)};var ExifRestore=function(){function d(){_classCallCheck(this,d)}_createClass(d,null,[{key:"initClass",value:function f(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function b(r){var s="";var j=undefined;var k=undefined;var l="";var m=undefined;var n=undefined;var o=undefined;var p="";var q=0;while(true){j=r[q++];k=r[q++];l=r[q++];m=j>>2;n=(j&3)<<4|k>>4;o=(k&15)<<2|l>>6;p=l&63;if(isNaN(k)){o=p=64}else{if(isNaN(l)){p=64}}s=s+this.KEY_STR.charAt(m)+this.KEY_STR.charAt(n)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(p);j=k=l="";m=n=o=p="";if(!(q<r.length)){break}}return s}},{key:"restore",value:function h(k,m){if(!k.match("data:image/jpeg;base64,")){return m}var l=this.decode64(k.replace("data:image/jpeg;base64,",""));var n=this.slice2Segments(l);var j=this.exifManipulation(m,n);return"data:image/jpeg;base64,".concat(this.encode64(j))}},{key:"exifManipulation",value:function c(m,n){var k=this.getExifArray(n);var l=this.insertExif(m,k);var j=new Uint8Array(l);return j}},{key:"getExifArray",value:function e(k){var j=undefined;var l=0;while(l<k.length){j=k[l];if(j[0]===255&j[1]===225){return j}l++}return[]}},{key:"insertExif",value:function g(p,m){var n=p.replace("data:image/jpeg;base64,","");var l=this.decode64(n);var q=l.indexOf(255,3);var o=l.slice(0,q);var k=l.slice(q);var j=o;j=j.concat(m);j=j.concat(k);return j}},{key:"slice2Segments",value:function i(m){var k=0;var o=[];while(true){var l;if(m[k]===255&m[k+1]===218){break}if(m[k]===255&m[k+1]===216){k+=2}else{l=m[k+2]*256+m[k+3];var j=k+l+2;var n=m.slice(k,j);o.push(n);k=j}if(k>m.length){break}}return o}},{key:"decode64",value:function a(t){var u="";var l=undefined;var m=undefined;var n="";var o=undefined;var p=undefined;var q=undefined;var r="";var s=0;var k=[];var j=/[^A-Za-z0-9\+\/\=]/g;if(j.exec(t)){console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.")}t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(true){o=this.KEY_STR.indexOf(t.charAt(s++));p=this.KEY_STR.indexOf(t.charAt(s++));q=this.KEY_STR.indexOf(t.charAt(s++));r=this.KEY_STR.indexOf(t.charAt(s++));l=o<<2|p>>4;m=(p&15)<<4|q>>2;n=(q&3)<<6|r;k.push(l);if(q!==64){k.push(m)}if(r!==64){k.push(n)}l=m=n="";o=p=q=r="";if(!(s<t.length)){break}}return k}}]);return d}();ExifRestore.initClass();var contentLoaded=function contentLoaded(l,e){var c=false;var k=true;var b=l.document;var j=b.documentElement;var a=b.addEventListener?"addEventListener":"attachEvent";var i=b.addEventListener?"removeEventListener":"detachEvent";var h=b.addEventListener?"":"on";var f=function f(m){if(m.type==="readystatechange"&&b.readyState!=="complete"){return}(m.type==="load"?l:b)[i](h+m.type,f,false);if(!c&&(c=true)){return e.call(l,m.type||m)}};var g=function g(){try{j.doScroll("left")}catch(m){setTimeout(g,50);return}return f("poll")};if(b.readyState!=="complete"){if(b.createEventObject&&j.doScroll){try{k=!l.frameElement}catch(d){}if(k){g()}}b[a](h+"DOMContentLoaded",f,false);b[a](h+"readystatechange",f,false);return l[a](h+"load",f,false)}};Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover){return Dropzone.discover()}};contentLoaded(window,Dropzone._autoDiscoverFunction);function __guard__(b,a){return typeof b!=="undefined"&&b!==null?a(b):undefined}function __guardMethod__(b,a,c){if(typeof b!=="undefined"&&b!==null&&typeof b[a]==="function"){return c(b,a)}else{return undefined}};